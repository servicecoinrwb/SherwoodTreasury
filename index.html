<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sherwood Forest | $QUIVER & $ARROW</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        :root { --forest-dark: #0b2916; --gold: #f1c40f; --quiver-blue: #3498db; --arrow-green: #2ecc71; --red: #e74c3c; --app-blue: #3498db; }
        body { font-family: 'Courier New', monospace; background: var(--forest-dark); color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: rgba(0,0,0,0.9); border: 2px solid var(--gold); border-radius: 15px; padding: 30px; width: 100%; max-width: 500px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        h1 { color: var(--gold); text-align: center; text-transform: uppercase; margin-bottom: 20px; }
        
        /* New App Link Button Styling */
        .btn-app { background: var(--app-blue); color: white; margin-bottom: 20px; border: 2px solid white; }
        .btn-app:hover { background: #2980b9; transform: scale(1.02); }

        .stat-card { background: #111; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 5px solid var(--gold); }
        .stat-label { font-size: 0.7rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 1.3rem; font-weight: bold; display: block; color: #fff; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; text-transform: uppercase; margin-top: 15px; transition: 0.3s; }
        .btn-gold { background: var(--gold); color: black; }
        .btn-red { background: transparent; border: 1px solid var(--red); color: var(--red); font-size: 0.8rem; }
        input { width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: white; margin-top: 10px; box-sizing: border-box; }
        #status { text-align: center; font-size: 0.8rem; margin-top: 15px; color: var(--arrow-green); }
    </style></head><body>

    <div class="container">
        <h1>üèπ Sherwood Forest</h1>

        <button onclick="goToApp()" class="btn btn-app">üè∞ Enter the Secret App</button>
        
        <div id="statArea">
            <div class="stat-card"><span class="stat-label">Your Wallet (ETH)</span><span class="stat-value" id="userEth">0.0000</span></div>
            <div class="stat-card"><span class="stat-label">Your Shares (ARROW)</span><span class="stat-value" id="userArrows">0.0000</span></div>
        </div>

        <button id="connectBtn" class="btn btn-gold">Connect Outlaw Wallet</button>
        
        <div id="ui" style="display:none;">
            <h3>Join Merry Men</h3>
            <input type="number" id="amt" placeholder="ETH to Stake">
            <button onclick="doDeposit()" class="btn btn-gold">Deposit Gold</button>
            <div id="status">Ready for ambush...</div>

            <hr style="border:0; border-top:1px solid #333; margin:20px 0;">

            <h3>Leave the Forest</h3>
            <input type="number" id="wAmt" placeholder="Arrows to Burn">
            <button onclick="doWithdraw()" class="btn btn-red">Withdraw Gold (Sell Arrows)</button>
        </div>
    </div>

<script>
    // NAVIGATION FUNCTION
    function goToApp() {
        window.location.href = 'app.html';
    }

    // --- YOUR EXISTING CONTRACT LOGIC ---
    const ADDR = "0x10F7Efb4Bd544E0436dD4bACe5bf7284D75ea44e";
    const ABI = [
        "function balanceOf(address) view returns (uint256)",
        "function deposit(address) payable",
        "function withdraw(uint256)"
    ];

    let provider, signer, contract;

    async function connect() {
        if (!window.ethereum) return alert("MetaMask not found!");
        await window.ethereum.request({ method: "eth_requestAccounts" });
        provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();
        contract = new ethers.Contract(ADDR, ABI, signer);
        
        document.getElementById('ui').style.display = 'block';
        document.getElementById('connectBtn').style.display = 'none';
        refresh();
    }

    async function refresh() {
        const addr = await signer.getAddress();
        const [eth, arrows] = await Promise.all([
            provider.getBalance(addr),
            contract.balanceOf(addr)
        ]);
        document.getElementById('userEth').innerText = ethers.formatEther(eth).substring(0,8) + " ETH";
        document.getElementById('userArrows').innerText = ethers.formatEther(arrows).substring(0,6) + " ARROW";
    }

    async function doDeposit() {
        const val = document.getElementById('amt').value;
        const tx = await contract.deposit(ethers.ZeroAddress, { value: ethers.parseEther(val) });
        await tx.wait();
        refresh();
    }

    async function doWithdraw() {
        const val = document.getElementById('wAmt').value;
        const tx = await contract.withdraw(ethers.parseEther(val));
        await tx.wait();
        refresh();
    }

    document.getElementById('connectBtn').onclick = connect;
</script></body></html>
